# 17workshop_윤은솔

## Python활용 SQL



### 문제1

자신의 반에 있는 사람들의 데이터를 저장하는 Student모델을 생성합니다.

Student모델이 가져야 할 필드는 아래와 같습니다.



name(이름) : CharField 

email(이메일) : CharField 

birthday(생년월일) : dateField 

age(나이) : IntegerField



#### 1-1. 환경 설정

##### bash

```bash
yooneunsol:~/workspace/homeworkshop/workshop (master) $ django-admin startproject workshop17
yooneunsol:~/workspace/homeworkshop/workshop (master) $ cd workshop17
yooneunsol:~/workspace/homeworkshop/workshop/workshop17 (master) $ django-admin startapp student
yooneunsol:~/workspace/homeworkshop (master) $ 
```

##### /homeworkshop/workshop/workshop17/workshop17/settings.py

```python
"""
Django settings for workshop17 project.

Generated by 'django-admin startproject' using Django 2.1.5.

For more information on this file, see
https://docs.djangoproject.com/en/2.1/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/2.1/ref/settings/
"""

import os

# Build paths inside the project like this: os.path.join(BASE_DIR, ...)
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

#01. 템플릿 경로 지정
TEMPLATES_DIR = os.path.join(BASE_DIR,"templates") #템플릿 경로 지정

# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/2.1/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = 'w%laradp9%63wyphts9ih-sc13949^x4z735(j8wdssp8!!5_z'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

#02. 다 열어주겠다는 의미로 *로 설정하기
ALLOWED_HOSTS = ["*"]


# Application definition

#student 추가
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'student'
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'workshop17.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [TEMPLATES_DIR],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'workshop17.wsgi.application'


# Database
# https://docs.djangoproject.com/en/2.1/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}


# Password validation
# https://docs.djangoproject.com/en/2.1/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/2.1/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_L10N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/2.1/howto/static-files/

STATIC_URL = '/static/'
```

##### /homeworkshop/workshop/workshop17/workshop17/urls.py

```python
from django.contrib import admin
from django.urls import path,include

urlpatterns = [
    path('admin/', admin.site.urls),
    path("students".include("student.urls"))
]
```

#### /homeworkshop/workshop/workshop17/student/urls.py

```python
from django.urls import path
from . import views

urlpatterns = [
    path("",views.index),    
]
```



#### /homeworkshop/workshop/workshop17/student/views.py

```python
from django.shortcuts import render

# Create your views here.
def index(request):
    return render(request,"student/index.html")
```

#### bash

서버 켜기 

http://homeworkshop-yooneunsol.c9users.io:8080/students

```bash
yooneunsol:~/workspace/homeworkshop/workshop/workshop17 (master) $ python manage.py runserver $IP:$PORT
```



#### 1-2. Student모델을 생성

#### /homeworkshop/workshop/workshop17/student/models.py

```python
from django.db import models

# Create your models here.
class Student(models.Model):
    name = models.CharField(max_length=100)
    email = models.TextField()
    birthday = models.DateField()
    age = models.IntegerField()
```

#### bash

```bash
yooneunsol:~/workspace/homeworkshop/workshop/workshop17 (master) $ python mane.py makemigrations
Migrations for 'student':
  student/migrations/0001_initial.py
    - Create model Student
```

```bash
yooneunsol:~/workspace/homeworkshop/workshop/workshop17 (master) $ python manage.py migrate
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, sessions, student
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying auth.0009_alter_user_last_name_max_length... OK
  Applying sessions.0001_initial... OK
  Applying student.0001_initial... OK
yooneunsol:~/workspace/homeworkshop/workshop/workshop17 (master) $ 
```

----

### 문제 2

모델 마이그레이션 작업을 거친 후 Admin페이지에서 주변 학생들의 이름을 세명 저장합니다.

#### 2-1.

#### superuser 만들기

#### bash

```bash
yooneunsol:~/workspace/homeworkshop/workshop/workshop17 (master) $ python mane.py createsuperuser
Username (leave blank to use 'ubuntu'): sol
Email address: todal160122@gmail.com
Password: 
Password (again): 
This password is too short. It must contain at least 8 characters.
This password is entirely numeric.
Bypass password validation and create user anyway? [y/N]: y
Superuser created successfully.
```



#### 2-2.

 Admin페이지에서 주변 학생들의 이름을 세명 저장합니다.

#### /homeworkshop/workshop/workshop17/student/admin.py

```python
from django.contrib import admin
from .models import Student

# Register your models here.
admin.site.register(Student)
```



```
http://homeworkshop-yooneunsol.c9users.io:8080/admin 

들어가서
student add 세명 하기
http://homeworkshop-yooneunsol.c9users.io:8080/admin/student/student/add/
```

----

### 문제 3번

저장 후 Admin페이지에서 학생들의 목록을 보기 쉽게 만들기 위해서 __str__메소드를 오버라이드 하여 name이 출력되게 만듭니다.

#### /homeworkshop/workshop/workshop17/student/models.py

```python
from django.db import models

# Create your models here.
class Student(models.Model):
    name = models.CharField(max_length=100)
    email = models.TextField()
    birthday = models.DateField()
    age = models.IntegerField()
    
    def __str__(self):
        return self.name
```





